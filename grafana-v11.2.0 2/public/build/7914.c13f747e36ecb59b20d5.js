"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7914],{27914:(x,d,e)=>{e.r(d),e.d(d,{SignupPage:()=>c,default:()=>h});var a=e(74848),g=e(49785),u=e(17172),i=e(88575),l=e(10354),P=e(67061),t=e(55852),r=e(2913),O=e(3169),f=e(35538),m=e(20851),_=e(78361);const c=({queryParams:E})=>{const j=(0,O._2)(),{handleSubmit:M,formState:{errors:n},register:o,getValues:D}=(0,g.mN)({defaultValues:{email:E.email,code:E.code}}),v=async s=>{s.name===""&&delete s.name,delete s.confirm,(await(0,u.AI)().post("/api/user/signup/step2",{email:s.email,code:s.code,username:s.email,orgName:s.orgName,password:s.password,name:s.name}).catch(p=>{const C=p.data?.message||p;j.warning(C)})).code==="redirect-to-select-org"&&window.location.assign((0,r.zj)().appSubUrl+"/profile/select-org?signup=1"),window.location.assign((0,r.zj)().appSubUrl+"/")};return(0,a.jsx)(m.GU,{children:(0,a.jsx)(m.qm,{children:(0,a.jsxs)("form",{onSubmit:M(v),style:{width:"100%"},children:[(0,a.jsx)(i.D,{label:"Your name",children:(0,a.jsx)(l.p,{id:"user-name",...o("name"),placeholder:"(optional)"})}),(0,a.jsx)(i.D,{label:"Email",invalid:!!n.email,error:n.email?.message,children:(0,a.jsx)(l.p,{id:"email",...o("email",{required:"Email is required",pattern:{value:f.pL,message:"Email is invalid"}}),type:"email",placeholder:"Email"})}),!(0,r.zj)().autoAssignOrg&&(0,a.jsx)(i.D,{label:"Org. name",children:(0,a.jsx)(l.p,{id:"org-name",...o("orgName"),placeholder:"Org. name"})}),(0,r.zj)().verifyEmailEnabled&&(0,a.jsx)(i.D,{label:"Email verification code (sent to your email)",children:(0,a.jsx)(l.p,{id:"verification-code",...o("code"),placeholder:"Code"})}),(0,a.jsx)(i.D,{label:"Password",invalid:!!n.password,error:n?.password?.message,children:(0,a.jsx)(_.s,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...o("password",{required:"Password is required"})})}),(0,a.jsx)(i.D,{label:"Confirm password",invalid:!!n.confirm,error:n?.confirm?.message,children:(0,a.jsx)(_.s,{id:"confirm-new-password",autoComplete:"new-password",...o("confirm",{required:"Confirmed password is required",validate:s=>s===D().password||"Passwords must match!"})})}),(0,a.jsxs)(P.B,{children:[(0,a.jsx)(t.$n,{type:"submit",children:"Submit"}),(0,a.jsx)(t.z9,{fill:"text",href:(0,r.zj)().appSubUrl+"/login",children:"Back to login"})]})]})})})},h=c}}]);

//# sourceMappingURL=7914.c13f747e36ecb59b20d5.js.map