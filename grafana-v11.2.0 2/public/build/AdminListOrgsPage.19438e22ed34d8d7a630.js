"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9736],{24870:(z,c,t)=>{t.r(c),t.d(c,{default:()=>$});var e=t(74848),h=t(96540),f=t(5805),i=t(17172),x=t(55852),m=t(69444),u=t(16233),g=t(31678),A=t(32196),d=t(70255),y=t(96374),O=t(40845),C=t(72129),D=t(10096);const j=()=>(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:"ID"}),(0,e.jsx)("th",{children:"Name"}),(0,e.jsx)("th",{style:{width:"1%"}})]})});function N({orgs:s,onDelete:n}){const r=D.contextSrv.hasPermission(g.AccessControlAction.OrgsDelete),[l,o]=(0,h.useState)();return(0,e.jsxs)("table",{className:"filter-table form-inline filter-table--hover",children:[j(),(0,e.jsx)("tbody",{children:s.map(a=>(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{className:"link-td",children:(0,e.jsx)("a",{href:`admin/orgs/edit/${a.id}`,children:a.id})}),(0,e.jsx)("td",{className:"link-td",children:(0,e.jsx)("a",{href:`admin/orgs/edit/${a.id}`,children:a.name})}),(0,e.jsx)("td",{className:"text-right",children:(0,e.jsx)(x.$n,{variant:"destructive",size:"sm",icon:"times",onClick:()=>o(a),"aria-label":"Delete org",disabled:!r})})]},`${a.id}-${a.name}`))}),l&&(0,e.jsx)(y.u,{isOpen:!0,icon:"trash-alt",title:"Delete",body:(0,e.jsxs)("div",{children:["Are you sure you want to delete '",l.name,"'?",(0,e.jsx)("br",{})," ",(0,e.jsx)("small",{children:"All dashboards for this organization will be removed!"})]}),confirmText:"Delete",onDismiss:()=>o(void 0),onConfirm:()=>{n(l.id),o(void 0)}})]})}const b=({rootProps:s})=>{const n=(0,O.of)(S);return(0,e.jsxs)("table",{className:"filter-table",...s,children:[j(),(0,e.jsx)("tbody",{children:new Array(3).fill(null).map((r,l)=>(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)(d.A,{width:16})}),(0,e.jsx)("td",{children:(0,e.jsx)(d.A,{width:240})}),(0,e.jsx)("td",{children:(0,e.jsx)(d.A,{containerClassName:n.deleteButton,width:22,height:24})})]},l))})]})},v=(0,C.j)(N,b),S=s=>({deleteButton:(0,A.css)({alignItems:"center",display:"flex",height:30,lineHeight:1})}),T=async s=>await(0,i.AI)().delete("/api/orgs/"+s),I=async()=>await(0,i.AI)().get("/api/orgs"),P=s=>(0,i.NF)(s)?s?.data?.message:"An unexpected error happened.";function $(){const[s,n]=(0,f.default)(async()=>await I(),[]),r=u.TP.hasPermission(g.AccessControlAction.OrgsCreate);return(0,h.useEffect)(()=>{n()},[n]),(0,e.jsx)(m.Y,{navId:"global-orgs",actions:(0,e.jsx)(x.z9,{icon:"plus",href:"org/new",disabled:!r,children:"New org"}),children:(0,e.jsxs)(m.Y.Contents,{children:[s.error&&P(s.error),s.loading&&(0,e.jsx)(v.Skeleton,{}),s.value&&(0,e.jsx)(v,{orgs:s.value,onDelete:l=>{T(l).then(()=>n())}})]})})}}}]);

//# sourceMappingURL=AdminListOrgsPage.19438e22ed34d8d7a630.js.map