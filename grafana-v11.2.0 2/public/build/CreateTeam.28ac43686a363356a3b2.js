"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5436],{31084:(h,i,t)=>{t.d(i,{Y:()=>_});var e=t(74848),O=t(96540),E=t(41053),n=t(10096),r=t(31678),d=t(37425),a=t(85927);const _=({teamId:o,roleOptions:l,disabled:C,roles:P,onApplyRoles:A,pendingRoles:s,apply:m=!1,maxWidth:T,width:M,isLoading:I})=>{const[{loading:U,value:R=P||[]},D]=(0,E.A)(async()=>{try{if(P)return P;if(m&&s?.length)return s;if(n.contextSrv.hasPermission(r.AccessControlAction.ActionTeamsRolesList)&&o>0)return await(0,a.xN)(o)}catch(c){console.error("Error loading options",c)}return[]},[o,s,P]);(0,O.useEffect)(()=>{D()},[D]);const u=async c=>{m?A&&A(c):(await(0,a.G3)(c,o),await D())},L=n.contextSrv.hasPermission(r.AccessControlAction.ActionTeamsRolesAdd)&&n.contextSrv.hasPermission(r.AccessControlAction.ActionTeamsRolesRemove);return(0,e.jsx)(d.n,{apply:m,onRolesChange:u,roleOptions:l,appliedRoles:R,isLoading:U||I,disabled:C,basicRoleDisabled:!0,canUpdateRoles:L,maxWidth:T,width:M})}},54939:(h,i,t)=>{t.d(i,{o:()=>d});var e=t(96540),O=t(24705),E=t(10096),n=t(31678),r=t(85927);const d=a=>{const[_,o]=(0,e.useState)(a),{value:l=[]}=(0,O.A)(async()=>E.contextSrv.licensedAccessControlEnabled()&&E.contextSrv.hasPermission(n.AccessControlAction.ActionRolesList)?(0,r.RL)(_):Promise.resolve([]),[_]);return[{roleOptions:l},o]}},80011:(h,i,t)=>{t.r(i),t.d(i,{CreateTeam:()=>M,default:()=>I});var e=t(74848),O=t(96540),E=t(49785),n=t(17172),r=t(39601),d=t(84167),a=t(88575),_=t(10354),o=t(55852),l=t(69444),C=t(31084),P=t(85927),A=t(54939),s=t(10096),m=t(31678);const T={icon:"users-alt",id:"team-new",text:"New team",subTitle:"Create a new team. Teams let you grant permissions to a group of users."},M=()=>{const U=s.contextSrv.user.orgId,[R,D]=(0,O.useState)([]),[{roleOptions:u}]=(0,A.o)(U),{handleSubmit:L,register:c,formState:{errors:W}}=(0,E.mN)(),f=s.contextSrv.hasPermission(m.AccessControlAction.ActionUserRolesAdd)&&s.contextSrv.hasPermission(m.AccessControlAction.ActionUserRolesRemove),x=async B=>{const v=await(0,n.AI)().post("/api/teams",B);if(v.teamId){try{await s.contextSrv.fetchUserPermissions(),s.contextSrv.licensedAccessControlEnabled()&&f&&await(0,P.G3)(R,v.teamId,v.orgId)}catch(K){console.error(K)}r.Ny.push(`/org/teams/edit/${v.teamId}`)}};return(0,e.jsx)(l.Y,{navId:"teams",pageNav:T,children:(0,e.jsx)(l.Y.Contents,{children:(0,e.jsxs)("form",{onSubmit:L(x),style:{maxWidth:"600px"},children:[(0,e.jsxs)(d.n,{children:[(0,e.jsx)(a.D,{label:"Name",required:!0,invalid:!!W.name,error:"Team name is required",children:(0,e.jsx)(_.p,{...c("name",{required:!0}),id:"team-name"})}),s.contextSrv.licensedAccessControlEnabled()&&(0,e.jsx)(a.D,{label:"Role",children:(0,e.jsx)(C.Y,{teamId:0,roleOptions:u,disabled:!1,apply:!0,onApplyRoles:D,pendingRoles:R,maxWidth:"100%"})}),(0,e.jsx)(a.D,{label:"Email",description:"This is optional and is primarily used for allowing custom team avatars.",children:(0,e.jsx)(_.p,{...c("email"),type:"email",id:"team-email",placeholder:"email@test.com"})})]}),(0,e.jsx)(o.$n,{type:"submit",variant:"primary",children:"Create"})]})})})},I=M}}]);

//# sourceMappingURL=CreateTeam.28ac43686a363356a3b2.js.map