"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[123],{21821:(f,d,n)=>{n.r(d),n.d(d,{default:()=>A});var t=n(74848),P=n(96540),o=n(71468),u=n(72724),a=n(55852),i=n(62930),B=n(29158),_=n(69444),p=n(10096),E=n(31678),l=n(58330);const s=(0,t.jsx)("span",{children:"Support bundles allow you to easily collect and share Grafana logs, configuration, and data with the Grafana Labs team."}),e=(0,t.jsx)(a.z9,{icon:"plus",href:"support-bundles/create",variant:"primary",children:"New support bundle"}),h=c=>({supportBundles:c.supportBundles.supportBundles,isLoading:c.supportBundles.isLoading}),O={loadBundles:l.WJ,removeBundle:l.Hb,checkBundles:l.ac},A=(0,o.connect)(h,O)(({supportBundles:c,isLoading:M,loadBundles:D,removeBundle:x,checkBundles:v})=>{const j=c.some(r=>r.state==="pending");(0,P.useEffect)(()=>{D()},[D]),(0,P.useEffect)(()=>{j&&v()});const C=p.contextSrv.hasPermission(E.AccessControlAction.ActionSupportBundlesCreate),g=p.contextSrv.hasPermission(E.AccessControlAction.ActionSupportBundlesDelete),m=C?e:void 0;return(0,t.jsx)(_.Y,{navId:"support-bundles",subTitle:s,actions:m,children:(0,t.jsx)(_.Y.Contents,{isLoading:M,children:(0,t.jsxs)("table",{className:"filter-table form-inline",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Created on"}),(0,t.jsx)("th",{children:"Requested by"}),(0,t.jsx)("th",{children:"Expires"}),(0,t.jsx)("th",{style:{width:"32px"}}),(0,t.jsx)("th",{style:{width:"1%"}}),(0,t.jsx)("th",{style:{width:"1%"}})]})}),(0,t.jsx)("tbody",{children:c?.map(r=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:(0,u.LE)(r.createdAt*1e3)}),(0,t.jsx)("th",{children:r.creator}),(0,t.jsx)("th",{children:(0,u.LE)(r.expiresAt*1e3)}),(0,t.jsx)("th",{children:r.state==="pending"&&(0,t.jsx)(i.y,{})}),(0,t.jsx)("th",{children:(0,t.jsx)(a.z9,{fill:"outline",disabled:r.state!=="complete",target:"_self",href:`/api/support-bundles/${r.uid}`,children:"Download"})}),(0,t.jsx)("th",{children:g&&(0,t.jsx)(B.K,{onClick:()=>x(r.uid),name:"trash-alt",variant:"destructive",tooltip:"Remove bundle"})})]},r.uid))})]})})})})},58330:(f,d,n)=>{n.d(d,{Hb:()=>p,OS:()=>E,WJ:()=>i,ac:()=>_,iO:()=>l});var t=n(2543),P=n.n(t),o=n(17172),u=n(39601),a=n(8212);function i(s=!1){return async e=>{try{s||e((0,a.sF)());const h=await(0,o.AI)().get("/api/support-bundles");e((0,a.sJ)(h))}finally{e((0,a.kH)())}}}const B=(0,t.throttle)(async s=>{const e=await(0,o.AI)().get("/api/support-bundles");s((0,a.sJ)(e))},1e3);function _(){return async s=>{s(B)}}function p(s){return async e=>{await(0,o.AI)().delete(`/api/support-bundles/${s}`),e(i(!0))}}function E(){return async s=>{try{s((0,a.Y1)());const e=await(0,o.AI)().get("/api/support-bundles/collectors");s((0,a.j7)(e))}catch{s((0,a.pB)("Error loading support bundles data collectors"))}finally{s((0,a.s7)())}}}function l(s){return async e=>{try{await(0,o.AI)().post("/api/support-bundles",s),u.Ny.push("/support-bundles")}catch{e((0,a.NV)("Error creating support bundle"))}}}}}]);

//# sourceMappingURL=SupportBundles.3ba1d67b5cecbcd5894c.js.map